<?xml version="1.0" encoding="UTF-8"?>
<persistence version="3.1"
             xmlns="https://jakarta.ee/xml/ns/persistence"
             xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
             xsi:schemaLocation="https://jakarta.ee/xml/ns/persistence
                                 https://jakarta.ee/xml/ns/persistence/persistence_3_1.xsd">

  <!-- ============================================================= -->
  <!--  PERSISTENCE UNIT DO WILDFLY (JTA + DATASOURCE)              -->
  <!-- ============================================================= -->

  <persistence-unit name="sigaparPU" transaction-type="JTA">

    <!-- O datasource configurado no WildFly -->
    <jta-data-source>java:/SigaparDS</jta-data-source>

    <!-- ENTIDADES DO PROJETO -->
    <class>br.com.sigapar1.entity.Horario</class>
    <class>br.com.sigapar1.entity.Agendamento</class>
    <class>br.com.sigapar1.entity.Guiche</class>
    <class>br.com.sigapar1.entity.Servico</class>
    <class>br.com.sigapar1.entity.EspacoAtendimento</class>
    <class>br.com.sigapar1.entity.Feriado</class>
    <class>br.com.sigapar1.entity.HorarioFuncionamento</class>
    <class>br.com.sigapar1.entity.Usuario</class>

    <!-- CONFIGURAÇÕES DO HIBERNATE -->
    <properties>

      <!-- MIGRAÇÃO AUTOMÁTICA DO MODELO -->
      <property name="jakarta.persistence.schema-generation.database.action" value="update"/>

      <!-- LOG SQL -->
      <property name="hibernate.show_sql" value="true"/>
      <property name="hibernate.format_sql" value="true"/>
      <property name="hibernate.use_sql_comments" value="true"/>

      <!-- Dialect pode ser omitido porque o datasource já sabe que é PostgreSQL -->
      <!-- <property name="hibernate.dialect" value="org.hibernate.dialect.PostgreSQLDialect"/> -->

    </properties>

  </persistence-unit>

</persistence>
