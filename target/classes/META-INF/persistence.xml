<?xml version="1.0" encoding="UTF-8"?>
<persistence version="3.1"
             xmlns="https://jakarta.ee/xml/ns/persistence"
             xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
             xsi:schemaLocation="https://jakarta.ee/xml/ns/persistence
                                 https://jakarta.ee/xml/ns/persistence/persistence_3_1.xsd">

    <!-- ============================================================= -->
    <!--   1) PERSISTENCE UNIT DO WILDFLY (JTA)                         -->
    <!-- ============================================================= -->
    <persistence-unit name="sigaparPU" transaction-type="JTA">

        <jta-data-source>java:/SigaparDS</jta-data-source>

        <!-- LISTA COMPLETA DAS ENTIDADES -->
        <class>br.com.sigapar1.entity.Usuario</class>
        <class>br.com.sigapar1.entity.Horario</class>
        <class>br.com.sigapar1.entity.Agendamento</class>
        <class>br.com.sigapar1.entity.Guiche</class>

        <properties>
            <property name="jakarta.persistence.schema-generation.database.action" value="update"/>
            <property name="hibernate.show_sql" value="true"/>
            <property name="hibernate.format_sql" value="true"/>
            <property name="hibernate.use_sql_comments" value="true"/>
        </properties>

    </persistence-unit>


    <!-- ============================================================= -->
    <!--   2) PERSISTENCE LOCAL (RESOURCE_LOCAL) PARA RODAR MAIN()      -->
    <!-- ============================================================= -->
    <persistence-unit name="sigaparLocalPU" transaction-type="RESOURCE_LOCAL">

        <provider>org.hibernate.jpa.HibernatePersistenceProvider</provider>

        <!-- LISTA COMPLETA DAS ENTIDADES -->
        <class>br.com.sigapar1.entity.Usuario</class>
        <class>br.com.sigapar1.entity.Horario</class>
        <class>br.com.sigapar1.entity.Agendamento</class>
        <class>br.com.sigapar1.entity.Guiche</class>

        <properties>

            <!-- PostgreSQL -->
            <property name="jakarta.persistence.jdbc.driver" value="org.postgresql.Driver"/>
            <property name="jakarta.persistence.jdbc.url" value="jdbc:postgresql://localhost:5432/sigapar"/>
            <property name="jakarta.persistence.jdbc.user" value="gabriel"/>
            <property name="jakarta.persistence.jdbc.password" value="siqga"/>

            <!-- Hibernate -->
            <property name="hibernate.dialect" value="org.hibernate.dialect.PostgreSQLDialect"/>
            <property name="hibernate.hbm2ddl.auto" value="update"/>

            <!-- logs SQL -->
            <property name="hibernate.show_sql" value="true"/>
            <property name="hibernate.format_sql" value="true"/>
            <property name="hibernate.use_sql_comments" value="true"/>

        </properties>

    </persistence-unit>

</persistence>
