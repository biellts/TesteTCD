<!DOCTYPE html>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                template="/templates/layout.xhtml">

<ui:define name="conteudo">

    <!-- CABEÃ‡ALHO -->
    <div style="text-align:center; padding:40px 20px;">
        <h1 style="font-size:2.6em; color:#036fab; margin:0; font-weight:700;">
            ðŸ‘¤ Meu Painel
        </h1>
        <p style="font-size:1.2em; color:#555; margin-top:10px;">
            Bem-vindo(a), <strong>#{loginController.usuarioLogado.nome}</strong>!
        </p>
    </div>

    <!-- ESTILO MELHORADO -->
    <style>
        .card-grid {
            max-width: 1200px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(290px, 1fr));
            gap: 32px;
            padding: 20px;
        }

        .card-link, .card-box {
            padding: 28px;
            border-radius: 16px;
            background: white;
            text-decoration: none;
            color: inherit;
            display: block;
            min-height: 180px;
            border-left: 6px solid #036fab;
            box-shadow: 0 8px 20px rgba(0,0,0,0.10);
            transition: transform .18s ease, box-shadow .18s ease;
        }

        .card-link:hover, .card-box:hover {
            transform: translateY(-6px);
            box-shadow: 0 14px 32px rgba(0,0,0,0.18);
        }

        .card-title {
            margin: 0 0 12px 0;
            font-size: 1.9em;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .card-content p {
            margin: 6px 0;
            font-size: 1.05em;
        }
    </style>

    <!-- CONTAINER DOS CARDS -->
    <div class="card-grid">

        <!-- PRÃ“XIMO AGENDAMENTO -->
        <div class="card-box" style="background:#e3f2fd; border-left-color:#1976d2;">
            <h2 class="card-title" style="color:#1565c0;">ðŸ“… PrÃ³ximo</h2>

            <div class="card-content">
                <h:panelGroup rendered="#{not empty agendamentoController.proximoAgendamento}">
                    <p>
                        <strong>
                            #{agendamentoController.proximoAgendamento.servico != null
                               ? agendamentoController.proximoAgendamento.servico.nome
                               : 'ServiÃ§o'}
                        </strong>
                    </p>

                    <p>#{agendamentoController.dataHoraFormatada(agendamentoController.proximoAgendamento)}</p>

                    <p style="font-size:0.9em; margin-top:8px;">
                        Protocolo:
                        <strong>#{agendamentoController.proximoAgendamento.protocolo}</strong>
                    </p>
                </h:panelGroup>

                <h:panelGroup rendered="#{empty agendamentoController.proximoAgendamento}">
                    <p style="color:#666;">Nenhum agendamento futuro</p>
                </h:panelGroup>
            </div>
        </div>

        <!-- ÃšLTIMOS AGENDAMENTOS -->
        <div class="card-box" style="background:#f3e5f5; border-left-color:#8e24aa;">
            <h2 class="card-title" style="color:#6a1b9a;">ðŸ•’ Ãšltimos</h2>

            <div class="card-content">
                <ui:repeat value="#{agendamentoController.ultimos3Agendamentos}" var="a">
                    <p>
                        <strong>
                            #{a.servico != null ? a.servico.nome : 'ServiÃ§o'}
                        </strong><br/>
                        <small>#{agendamentoController.dataHoraFormatada(a)}</small>
                    </p>
                </ui:repeat>

                <h:panelGroup rendered="#{empty agendamentoController.ultimos3Agendamentos}">
                    <p style="color:#666;">Nenhum histÃ³rico encontrado</p>
                </h:panelGroup>
            </div>
        </div>

        <!-- AGENDAR -->
        <h:link outcome="/agendamento/agendar"
                styleClass="card-link"
                style="background:#e8f5e9; border-left-color:#2e7d32; color:#2e7d32;">
            <h2 class="card-title">âž• Agendar</h2>
            <p>Novo atendimento</p>
        </h:link>

        <!-- MEUS AGENDAMENTOS -->
        <h:link outcome="/agendamento/meus"
                styleClass="card-link"
                style="background:#fff3e0; border-left-color:#fb8c00; color:#ef6c00;">
            <h2 class="card-title">ðŸ“‚ Meus Agendamentos</h2>
            <p>Ver todos â€¢ Cancelar</p>
        </h:link>

        <!-- PERFIL -->
        <h:link outcome="/usuarios/perfil"
                styleClass="card-link"
                style="background:#f5f5f5; border-left-color:#607d8b; color:#455a64;">
            <h2 class="card-title">âš™ Editar Perfil</h2>
            <p>Atualizar dados pessoais</p>
        </h:link>

    </div>

    <!-- RODAPÃ‰ -->
    <div style="text-align:center; margin-top:70px; color:#888; font-size:1em; padding:20px;">
        <p><strong>SIGAPAR</strong> â€¢ Sistema de Atendimento â€¢ Â© 2025</p>
    </div>

</ui:define>
</ui:composition>
