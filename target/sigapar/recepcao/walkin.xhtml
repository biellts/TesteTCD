<ui:composition template="/templates/layout.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets">

    <ui:define name="conteudo">

        <h1 style="text-align:center; margin-bottom:20px;">
            Atendimento Walk-in
        </h1>

        <p style="text-align:center; color:#666; margin-top:-10px; margin-bottom:30px;">
            Registro rápido de cliente presencial
        </p>

        <div class="card" style="max-width:450px; margin:auto; padding:20px;">
            
            <h:form id="formWalkin" prependId="false">

                <!-- MENSAGENS -->
                <h:messages style="color:red; margin-bottom:15px;" globalOnly="true"/>

                <!-- NOME -->
                <label>Nome completo *</label>
                <h:inputText value="#{walkinController.nome}"
                             required="true"
                             requiredMessage="Nome é obrigatório"
                             maxlength="100"
                             style="width:100%; margin-bottom:12px;"/>

                <!-- CPF -->
                <label>CPF <span style="font-size:12px; color:gray;">(Somente números)</span></label>
                <h:inputText value="#{walkinController.cpf}"
                             required="true"
                             requiredMessage="CPF é obrigatório"
                             maxlength="11"
                             oninput="this.value=this.value.replace(/\\D/g,'').slice(0,11);"
                             style="width:100%; margin-bottom:12px;"/>

                <!-- TELEFONE -->
                <label>Telefone</label>
                <h:inputText value="#{walkinController.telefone}"
                             maxlength="11"
                             oninput="this.value=this.value.replace(/\\D/g,'').slice(0,11);"
                             style="width:100%; margin-bottom:12px;"/>

                <!-- SERVIÇO -->
                <label>Serviço desejado *</label>
                <h:selectOneMenu value="#{walkinController.servicoId}"
                                 required="true"
                                 requiredMessage="Selecione um serviço"
                                 style="width:100%; margin-bottom:20px;">
                    <f:selectItem itemLabel="Selecione..." itemValue="" />
                    <f:selectItems value="#{walkinController.servicos}"
                                   var="s"
                                   itemValue="#{s.id}"
                                   itemLabel="#{s.nome}" />
                    <f:converter converterId="jakarta.faces.Long"/>
                </h:selectOneMenu>

                <!-- ATENDENTE -->
                <label>Atendente (opcional)</label>
                <h:selectOneMenu value="#{walkinController.atendenteId}"
                                 style="width:100%; margin-bottom:20px;">
                    <f:selectItem itemLabel="Automático" itemValue="" />
                    <f:selectItems value="#{walkinController.atendentes}"
                                   var="a"
                                   itemValue="#{a.id}"
                                   itemLabel="#{a.nome} (#{a.cpf})" />
                    <f:converter converterId="jakarta.faces.Long"/>
                </h:selectOneMenu>

                <!-- LOCAL / GUICHÊ -->
                <label>Local / Guichê (opcional)</label>
                <h:selectOneMenu value="#{walkinController.espacoId}"
                                 style="width:100%; margin-bottom:20px;">
                    <f:selectItem itemLabel="Automático" itemValue="" />
                    <f:selectItems value="#{walkinController.espacos}"
                                   var="e"
                                   itemValue="#{e.id}"
                                   itemLabel="#{e.codigo} - #{e.descricao}" />
                    <f:converter converterId="jakarta.faces.Long"/>
                </h:selectOneMenu>

                <!-- BOTÃO -->
                <h:commandButton value="Registrar Walk-in"
                                 action="#{walkinController.registrarWalkin}"
                                 style="width:100%; padding:12px; font-size:16px;
                                        background:#28a745; color:white; border:none;
                                        border-radius:5px; cursor:pointer;"/>

            </h:form>
        </div>

    </ui:define>
</ui:composition>
