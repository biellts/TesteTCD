<ui:composition template="/templates/layout.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="jakarta.faces.facelets"
                xmlns:h="jakarta.faces.html"
                xmlns:f="jakarta.faces.core">

    <ui:define name="conteudo">

        <h1 style="text-align:center; margin-bottom:20px;">Criar Conta</h1>

        <div class="card" style="max-width:450px; margin:auto; padding:20px;">
            <h:form id="formCadastro" prependId="false">

                <h:messages style="color:red; margin-bottom:15px;" globalOnly="true"/>

                <!-- NOME -->
                <label>Nome</label>
                <h:inputText value="#{usuarioController.usuario.nome}"
                             required="true"
                             requiredMessage="Nome é obrigatório"
                             style="width:100%; margin-bottom:12px;"/>

                <!-- EMAIL -->
                <label>Email</label>
                <h:inputText value="#{usuarioController.usuario.email}"
                             required="true"
                             requiredMessage="E-mail é obrigatório"
                             style="width:100%; margin-bottom:12px;"/>

                <!-- CPF -->
                <label>CPF <span style="font-size:12px; color:gray;">(Somente números, sem ponto ou hífen)</span></label>
                <h:inputText value="#{usuarioController.usuario.cpf}"
                             required="true"
                             requiredMessage="CPF é obrigatório"
                             maxlength="11"
                             style="width:100%; margin-bottom:12px;"/>

                <!-- TELEFONE -->
                <label>Telefone</label>
                <h:inputText value="#{usuarioController.usuario.telefone}"
                             required="true"
                             requiredMessage="Telefone é obrigatório"
                             maxlength="11"
                             style="width:100%; margin-bottom:12px;">
                    <f:validateLength maximum="11"/>
                    <f:validateRegex pattern="\d{0,11}"/>
                </h:inputText>

                <!-- DATA NASCIMENTO -->
                <label>Data de Nascimento</label>
                <h:inputText value="#{usuarioController.usuario.dataNascimento}"
                             maxlength="10"
                             placeholder="dd/mm/aaaa"
                             oninput="this.value=this.value.replace(/\D/g,'').slice(0,8).replace(/(\d{2})(\d{2})(\d{0,4})/,'$1/$2/$3');"
                             style="width:100%; margin-bottom:12px;">
                    <f:convertDateTime pattern="dd/MM/yyyy"/>
                </h:inputText>

                <!-- SENHA -->
                <label>Senha</label>
                <h:inputSecret id="senha"
                               value="#{usuarioController.usuario.senha}"
                               required="true"
                               requiredMessage="Senha é obrigatória"
                               style="width:100%; margin-bottom:12px;"/>

                <!-- CONFIRMAR SENHA -->
                <label>Confirmar Senha</label>
                <h:inputSecret id="senhaConfirma"
                               value="#{usuarioController.confirmaSenha}"
                               required="true"
                               requiredMessage="Confirme a senha"
                               style="width:100%; margin-bottom:20px;"/>

                <!-- TERMOS -->
                <div style="margin-bottom:20px; font-size:14px;">
                    <h:selectBooleanCheckbox value="#{usuarioController.aceitouTermos}"
                                             required="true"
                                             requiredMessage="Você deve aceitar os Termos"/>
                    Aceito os
                    <a href="#{request.contextPath}/publico/termos.xhtml"
                       target="_blank">
                        Termos de Uso e Política de Privacidade
                    </a>
                </div>

                <!-- BOTÃO -->
                <h:commandButton value="Criar Conta"
                                 action="#{usuarioController.salvarPublico}"
                                 style="width:100%; padding:12px; font-size:16px;
                                        background:#004AAD; color:white; border:none;
                                        border-radius:5px; cursor:pointer;"/>
            </h:form>
        </div>

    </ui:define>
</ui:composition>
