<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">

<ui:composition template="/templates/layout.xhtml">

    <ui:define name="conteudo">

        <!-- CABEÇALHO -->
        <div style="text-align:center; padding:40px 20px;">
            <h1 style="color:#036fab; font-size:2.5em; margin:0;">
                Disponibilidade do Atendente
            </h1>
            <p style="color:#555; font-size:1.2em; margin-top:10px;">
                Gerencie seu status e filas de atendimento
            </p>
        </div>

        <!-- CARD PRINCIPAL -->
        <div class="card-wrapper" style="max-width:700px; margin:0 auto 40px;">
            <div class="card"
                 style="padding:30px; border-radius:12px; box-shadow:0 8px 25px rgba(0,0,0,0.1); background:#ffffff;">

                <h:form id="formAtendente" prependId="false">

                    <!-- INFORMAÇÕES DO USUÁRIO -->
                    <div style="font-size:1em; padding:15px; background:#f8f9fa; border-radius:8px; margin-bottom:20px;">
                        <b>Usuário:</b> #{loginController.usuarioLogado.nome} <br/>

                        <b>Status atual:</b>
                        <span style="font-weight:bold; color:#036fab;">
                            #{loginController.usuarioLogado.status}
                        </span>

                        <!-- Motivo da pausa -->
                        <h:panelGroup rendered="#{loginController.usuarioLogado.motivoPausa != null}">
                            <br/>
                            <b>Motivo da pausa:</b> #{loginController.usuarioLogado.motivoPausa}
                        </h:panelGroup>
                    </div>

                    <!-- FILA -->
                    <p style="font-size:1em; margin-bottom:25px;">
                        <b>Pessoas na fila:</b>
                        <span style="color:#2980b9; font-weight:bold;">
                            #{atendenteController.fila}
                        </span>
                    </p>

                    <hr style="margin-bottom:25px;"/>

                    <!-- BOTÕES PRINCIPAIS - mesmo estilo do layout -->
                    <h:panelGroup rendered="#{!atendenteController.modoPausa}"
                                  style="display:flex; gap:10px; flex-wrap:wrap; margin-bottom:25px;">

                        <p:commandButton value="Ficar Disponível"
                                         action="#{atendenteController.ficarDisponivel}"
                                         update="formAtendente"
                                         style="flex:1; padding:14px 0; border-radius:8px;
                                                background:#28a745; border:none; color:white; font-weight:600; font-size:1.05em;" />

                        <p:commandButton value="Entrar em Pausa"
                                         action="#{atendenteController.abrirPausa}"
                                         update="formAtendente"
                                         style="flex:1; padding:14px 0; border-radius:8px;
                                                background:#f1c40f; border:none; color:black; font-weight:600; font-size:1.05em;" />

                        <p:commandButton value="Ficar Indisponível"
                                         action="#{atendenteController.ficarIndisponivel}"
                                         update="formAtendente"
                                         style="flex:1; padding:14px 0; border-radius:8px;
                                                background:#e74c3c; border:none; color:white; font-weight:600; font-size:1.05em;" />
                    </h:panelGroup>

                    <!-- PAUSA - FORM -->
                    <h:panelGroup rendered="#{atendenteController.modoPausa}">

                        <h2 style="color:#036fab; margin-bottom:20px;">
                            Motivo da Pausa
                        </h2>

                        <p:inputTextarea value="#{atendenteController.motivoPausa}"
                                         rows="4" autoResize="true"
                                         style="width:100%; padding:12px; border-radius:6px; border:1px solid #ccc; margin-bottom:20px;" />

                        <div style="display:flex; gap:10px;">

                            <p:commandButton value="Confirmar Pausa"
                                             action="#{atendenteController.pausar}"
                                             update="formAtendente"
                                             style="flex:1; padding:14px 0; border-radius:8px;
                                                    background:#f39c12; border:none; color:white; font-weight:600;" />

                            <p:commandButton value="Cancelar"
                                             action="#{atendenteController.cancelarPausa}"
                                             update="formAtendente"
                                             style="flex:1; padding:14px 0; border-radius:8px;
                                                    background:#7f8c8d; border:none; color:white; font-weight:600;" />
                        </div>

                    </h:panelGroup>

                </h:form>

            </div>
        </div>

    </ui:define>
</ui:composition>

</html>
